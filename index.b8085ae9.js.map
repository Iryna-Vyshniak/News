{"mappings":"AAiBO,MCjBDA,EAAOC,SAASC,cAAc,eA0CvBC,EAAgBC,IAC3B,MAAMC,EALgB,CAAAD,GACtBA,aAAA,EAAAA,EAAOE,QAAO,CAACC,EAAKC,IAASD,EAlCR,GAACE,QACtBA,EAAOC,MACPA,EAAKC,QACLA,EAAOC,QACPA,EAAOC,KACPA,EAAIC,SACJA,EAAQC,UACRA,EAASC,YACTA,KACe,gIAGcF,sCACJH,qFAGCD,YACzBM,EAAc,0BAA0BA,QAAoB,wCAE5DJ,EAAU,4BAA4BA,QAAgB,+EAG1BC,iFAG7BJ,EAAU,2BAA2BA,QAAgB,+BAC7BM,mCAQWE,CAAeT,IAAO,IAI1CU,CAAgBd,GAC/BJ,EAAKmB,UAAYd,CAAM,EAuClB,SAASe,GAAoBC,UAClCA,EAASZ,QACTA,EAAOC,MACPA,EAAKC,QACLA,EAAOC,QACPA,EAAOC,KACPA,EAAIC,SACJA,EAAQC,UACRA,EAASC,YACTA,IAGA,MAAkB,8IAGmBF,EAAS,+CACbH,iCAG3BU,EACI,wDAEQA,WAAmBP,qCAE3B,kFAGsBJ,mBACxBM,EAAc,0BAA0BA,QAAoB,wDAE1DJ,EAAU,4BAA4BA,QAAgB,sGAG1BC,0GAG5BJ,EAAU,2BAA2BA,QAAgB,kBACrDM,EAAY,2BAA2BA,QAAkB,+C,CCjHrE,MAAMO,EAAOrB,SAASC,cAAc,eACpCqB,QAAQC,IAAIF,GACZ,MAAMG,EAAOxB,SAASC,cAAc,SAqDpC,SAASwB,EAAQC,GACfJ,QAAQC,IAAIG,E,CApDdF,EAAKG,iBAAiB,UAEtB,SAAkBC,GAChBA,EAAEC,iBAEF,MAAMC,EAAQF,EAAEG,cAAcC,SAASC,KAAKH,MAAMI,OAClDZ,QAAQC,IAAIO,IFhBiBK,EEiBdL,EFfRM,MADY,0JAA0JD,KACpJE,MAAKC,GAAYA,EAASC,UEgBhDF,MAAK,EAACG,QAAEA,MAEP,GADAlB,QAAQC,IAAIiB,EAAQC,QACG,IAAnBD,EAAQC,OACV,MAAM,IAAIC,MAAM,sBAElB,OAAOF,EAAQnC,QACb,CAACsC,EAAQC,IAAYD,EAASxB,EAAoByB,IAClD,GACD,IAEFP,MAAKM,IACJrB,QAAQC,IAAIoB,GACZtB,EAAKH,UAAYyB,CAAM,IAExBE,MAAMpB,GACNqB,SAAQ,KACP,MAAMC,EAAa/C,SAASgD,iBAAiB,kBAE3CC,SAASC,OAAOC,iBAAiBJ,EAAW,IAAIK,YAClDL,EAAWM,SAAQC,IACjB,MAAMC,EAAcD,EAAUE,UAC1BD,EAAYd,OAAS,KACvBa,EAAUG,UAAUC,IAAI,aAM1B,GAJcC,KAAKC,KACjBN,EAAUO,aACRZ,SAASC,OAAOC,iBAAiBG,GAAWF,aAEpC,GAAI,CACd,MAAMU,EAAY,IACZC,EAAW,MACjB,GAAIR,EAAYd,OAASqB,EAAW,CAClC,MAAME,EAAgBT,EACnBU,UAAU,EAAGH,GACbI,QAAO,eAAiB,KAAOH,EAAW,KAC7CT,EAAUE,UAAYQ,EAAgBD,C,MAI5CvC,EAAK2C,OAAO,IFzDX,IAAwBhC,C,IEiE/BC,MFjD6B,uHEkD1BC,MAAKC,GAAYA,EAASC,SAC1BF,MAAK,EAACG,QAAEA,MAIPlB,QAAQC,IAAIiB,GACZtC,EAAcsC,EAAQ,IAEvBK,MAAMpB,GACNqB,SAAQ,KACP,MAAMC,EAAa/C,SAASgD,iBAAiB,kBAE3CC,SAASC,OAAOC,iBAAiBJ,EAAW,IAAIK,YACZL,EAA3BM,SAAQC,IACjB,MAAMC,EAAcD,EAAUE,UAC1BD,EAAYd,OAAS,KACvBa,EAAUG,UAAUC,IAAI,aAM1B,GAJcC,KAAKC,KACjBN,EAAUO,aACRZ,SAASC,OAAOC,iBAAiBG,GAAWF,aAEpC,GAAI,CACd,MAAMU,EAAY,IACZC,EAAW,MACjB,GAAIR,EAAYd,OAASqB,EAAW,CAClC,MAAME,EAAgBT,EACnBU,UAAU,EAAGH,GACbI,QAAO,eAAiB,KAAOH,EAAW,KAC7CT,EAAUE,UAAYQ,EAAgBD,C,KAG1C","sources":["src/app/newsAPI.js","src/app/createMarkup.js","src/index.js"],"sourcesContent":["// ----- NEWS DATA ----------------------------------------------------------------\nexport function fetchSearchAPI(query) {\n  const SEARCH_URL = `https://newsdata.io/api/1/news?apikey=pub_18476a7917762b26ebbb61a44ce2bbbc974b2&category=top,politics,world,environment,entertainment&language=uk,en&q=${query}`;\n  return fetch(SEARCH_URL).then(response => response.json());\n}\n\n// --------------NEWS API----------------------------------------------------------------------------\n//const BASE_URL = `https://newsapi.org/v2/`;\n// const NEWS_API_KEY = `1572576c777b4bada530e28e03640c11`;\n\n// // SEARCH\n// export function fetchSearchAPI(query) {\n//   const SEARCH_URL = `${BASE_URL}everything?apiKey=${NEWS_API_KEY}&q=${query}&searchIn=title&from=2023-03-04&to=2023-03-05&language=en&sortBy=popularity&pageSize=24`;\n//   return fetch(SEARCH_URL).then(response => response.json());\n// }\n\n// ----------------------------------------------------------------\nexport const URL_LIST_NEWS = `https://newsdata.io/api/1/news?apikey=pub_18476a7917762b26ebbb61a44ce2bbbc974b2&country=ua&category=top&language=uk`;\n\n// --------------NEWS API----------------------------------------------------------------------------\n\n// export const URL_LIST_NEWS = `${BASE_URL}top-headlines?country=ua&pageSize=20`;\n\n// // LIST NEWS\n// export const optionsListNews = {\n//   headers: {\n//     'X-Api-Key': `1572576c777b4bada530e28e03640c11`,\n//   },\n// };\n","const list = document.querySelector('[data-list]');\n\n// ----- main page -------------------------------------------------------------------------\n\n// 1\nconst createListItem = ({\n  creator,\n  title,\n  pubDate,\n  content,\n  link,\n  keywords,\n  source_id,\n  description,\n}) => /* html */ `\n<li class=\"news__card--main card--main stacked featured\">\n<div class=\"card__category-data\">\n<span class=\"card__category\">${keywords}</span>\n<span class=\"card__date\">${pubDate}</span>\n</div>\n <div class=\"card__content-wrapper\">\n  <h2 class=\"card__title\">${title}</h2>\n ${description ? `<p class=\"card__descr\">${description}</p>` : ''}\n <div class=\"content-wrapper\">\n ${content ? `<p class=\"card__content\">${content}</p>` : ''}\n </div>\n <div class=\"card__link-border\">\n <a class=\"card__link\" href=\"${link}\" target=\"_blank\">Read more</a>\n </div>\n<div class=\"card__category-info\">\n${creator ? `<p class=\"card__author\">${creator}</p>` : ''}\n<p class=\"card__source\">${source_id}</p>\n</div>\n  </div>\n</li>\n`;\n\n// 2\nconst generateContent = array =>\n  array?.reduce((acc, item) => acc + createListItem(item), '');\n\n//3 finally function to generate content\nexport const insertContent = array => {\n  const result = generateContent(array);\n  list.innerHTML = result;\n};\n\n// --------------NEWS API----------------------------------------------------------------------------\n// // 1\n// const createListItem = ({\n//   author,\n//   title,\n//   publishedAt,\n//   description,\n//   url,\n//   source: { id, name },\n// }) => /* html */ `\n// <li class=\"news__card--main card--main stacked featured\">\n// <div class=\"card__category-data\">\n// <span class=\"card__category\">${name}</span>\n// <span class=\"card__date\">${publishedAt.split('T').join(' ').slice(0, -4)}</span>\n// </div>\n//  <div class=\"card__content-wrapper\">\n//   <h2 class=\"card__title\">${title}</h2>\n//  ${description ? `<p class=\"card__desc\">${description}</p>` : ''}\n// <p class=\"card__author\">${author ?? 'Anonymous'}</p>\n//   <a class=\"card__link\" href=\"${url}\" target=\"_blank\">Read more</a>\n//   </div>\n// </li>\n// `;\n\n// // 2\n// const generateContent = array =>\n//   array?.reduce((acc, item) => acc + createListItem(item), '');\n\n// //3 finally function to generate content\n// export const insertContent = array => {\n//   const result = generateContent(array);\n//   list.innerHTML = result;\n// };\n\n// ----- for search -------------------------------------------------------------------------\n\nexport function createMarkupArticle({\n  image_url,\n  creator,\n  title,\n  pubDate,\n  content,\n  link,\n  keywords,\n  source_id,\n  description,\n}) {\n  const defaultImg = `https://ik.imagekit.io/irinavn2011/ukraine-7047830_1920.jpg?ik-sdk-version=javascript-1.4.3&updatedAt=1678121370881`;\n  return /* html */ `\n<li class=\"news__card--main card--main stacked featured\">\n      <div class=\"card__category-data\">\n        <span class=\"card__category\">${keywords[0]}</span>\n        <span class=\"card__date\">${pubDate}</span>\n      </div>\n      ${\n        image_url\n          ? `\n      <div class=\"card__image\">\n        <img src=\"${image_url}\" alt=\"${keywords}\" loading=\"lazy\" />\n      </div>`\n          : ''\n      }\n      <div class=\"card__content-wrapper\">\n        <h2 class=\"card__title\">${title}</h2>\n        ${description ? `<p class=\"card__descr\">${description}</p>` : ''}\n        <div class=\"content-wrapper\">\n          ${content ? `<p class=\"card__content\">${content}</p>` : ''}\n        </div>\n        <div class=\"card__link-border\">\n          <a class=\"card__link\" href=\"${link}\" target=\"_blank\">Read more</a>\n        </div>\n        <div class=\"card__category-info\">\n          ${creator ? `<p class=\"card__author\">${creator}</p>` : ''} \n          ${source_id ? `<p class=\"card__source\">${source_id}</p>` : ''}\n        </div>\n      </div>\n    </li>\n`;\n}\n// // ----- for search NEWS API ----------------------------------------------------------------------\n\n// export function createMarkupArticle({\n//   author,\n//   title,\n//   publishedAt,\n//   urlToImage,\n//   description,\n//   url,\n//   source: { id, name },\n// }) {\n//   const defaultImg = `https://ik.imagekit.io/irinavn2011/ukraine-7047830_1920.jpg?ik-sdk-version=javascript-1.4.3&updatedAt=1678121370881`;\n//   return /* html */ `\n// <li class=\"news__card card stacked featured\">\n// <div class=\"card__category-data\">\n// <span class=\"card__category\">${name}</span>\n// <span class=\"card__date\">${publishedAt.split('T').join(' ').slice(0, -4)}</span>\n// </div>\n//      ${\n//        urlToImage\n//          ? `<div class=\"card__image\"> <img src=\"${urlToImage}\" alt=\"${id}\" loading=\"lazy\"></div>`\n//          : `<div class=\"card__image\"> <img src=\"${defaultImg}\" alt=\"${id}\" loading=\"lazy\"></div>`\n//      }\n\n//  <div class=\"card__content\">\n//   <h2 class=\"card__title\">${title}</h2>\n//  ${description ? `<p class=\"card__desc\">${description}</p>` : ''}\n// <p class=\"card__author\">${author ?? 'Anonymous'}</p>\n//   <a class=\"card__link\" href=\"${url}\" target=\"_blank\">Read more</a>\n//   </div>\n// </li>\n// `;\n// }\n\n//{ <p class=\"news__desc\">${description ? description : ''}</p> } => doesn`t good variant for semantic\n//   <p class=\"news__author\">${author ?? ''}</p>\n","import { format } from 'date-fns';\nimport { uk } from 'date-fns/locale';\n\nimport { fetchSearchAPI, optionsListNews, URL_LIST_NEWS } from './app/newsAPI';\n//import { setImages, setTitleImages } from './app/setImages';\nimport { createMarkupArticle, insertContent } from './app/createMarkup';\n\nconst list = document.querySelector('[data-list]');\nconsole.log(list);\nconst form = document.querySelector('#form');\n\nform.addEventListener('submit', onSubmit);\n\nfunction onSubmit(e) {\n  e.preventDefault();\n\n  const value = e.currentTarget.elements.news.value.trim();\n  console.log(value);\n  fetchSearchAPI(value)\n    .then(({ results }) => {\n      console.log(results.length);\n      if (results.length === 0) {\n        throw new Error('Not articles found');\n      }\n      return results.reduce(\n        (markup, article) => markup + createMarkupArticle(article),\n        ''\n      );\n    })\n    .then(markup => {\n      console.log(markup);\n      list.innerHTML = markup;\n    })\n    .catch(onError)\n    .finally(() => {\n      const contentEls = document.querySelectorAll('.card__content');\n      const maxHeight =\n        parseInt(window.getComputedStyle(contentEls[0]).lineHeight) * 20;\n      contentEls.forEach(contentEl => {\n        const contentText = contentEl.innerText;\n        if (contentText.length > 800) {\n          contentEl.classList.add('long-text');\n        }\n        const lines = Math.ceil(\n          contentEl.clientHeight /\n            parseInt(window.getComputedStyle(contentEl).lineHeight)\n        );\n        if (lines > 20) {\n          const maxLength = 800;\n          const ellipsis = '...';\n          if (contentText.length > maxLength) {\n            const truncatedText = contentText\n              .substring(0, maxLength)\n              .replace(/(\\.|!|\\?)\\s/g, '$1' + ellipsis + ' ');\n            contentEl.innerText = truncatedText + ellipsis;\n          }\n        }\n      });\n      form.reset();\n    });\n}\n\nfunction onError(err) {\n  console.log(err);\n}\n\nfetch(URL_LIST_NEWS)\n  .then(response => response.json())\n  .then(({ results }) => {\n    // if (!ok) {\n    //   throw new Error(`Error fetching`);\n    // }\n    console.log(results);\n    insertContent(results);\n  })\n  .catch(onError)\n  .finally(() => {\n    const contentEls = document.querySelectorAll('.card__content');\n    const maxHeight =\n      parseInt(window.getComputedStyle(contentEls[0]).lineHeight) * 20; // максимальна висота контейнера (20 рядки тексту)\n    contentEls.forEach(contentEl => {\n      const contentText = contentEl.innerText;\n      if (contentText.length > 800) {\n        contentEl.classList.add('long-text'); // додає клас long-text, якщо довжина тексту перевищує 350 символів\n      }\n      const lines = Math.ceil(\n        contentEl.clientHeight /\n          parseInt(window.getComputedStyle(contentEl).lineHeight)\n      );\n      if (lines > 20) {\n        const maxLength = 800;\n        const ellipsis = '...';\n        if (contentText.length > maxLength) {\n          const truncatedText = contentText\n            .substring(0, maxLength)\n            .replace(/(\\.|!|\\?)\\s/g, '$1' + ellipsis + ' ');\n          contentEl.innerText = truncatedText + ellipsis;\n        }\n      }\n    });\n  });\n\n// --------------NEWS API---------------------------------------\n\n// fetch(URL_LIST_NEWS, optionsListNews)\n//   .then(response => response.json())\n//   .then(({ articles }) => {\n//     // if (!ok) {\n//     //   throw new Error(`Error fetching`);\n//     // }\n//     console.log(articles);\n//     insertContent(articles);\n//   })\n//   .catch(onError);\n\n// function onSubmit(e) {\n//   e.preventDefault();\n\n//   const value = e.currentTarget.elements.news.value.trim();\n\n//   fetchSearchAPI(value)\n//     .then(({ articles }) => {\n//       if (articles.length === 0) {\n//         throw new Error('No articles');\n//       }\n//       return articles.reduce(\n//         (markup, article) => markup + createMarkupArticle(article),\n//         ''\n//       );\n//     })\n//     .then(markup => (list.innerHTML = markup))\n//     .catch(onError)\n//     .finally(() => form.reset());\n//   console.log(document.querySelector('li:nth-child(3)'));\n// }\n\n// function onError(err) {\n//   console.log(err);\n// }\n"],"names":["$ec18a4bbba490e65$var$list","document","querySelector","$ec18a4bbba490e65$export$c23a7dc17ab580c2","array","result","reduce","acc","item","creator","title","pubDate","content","link","keywords","source_id","description","$ec18a4bbba490e65$var$createListItem","$ec18a4bbba490e65$var$generateContent","innerHTML","$ec18a4bbba490e65$export$2cc953b8336ab543","image_url","$1f0dc3b9307be026$var$list","console","log","$1f0dc3b9307be026$var$form","$1f0dc3b9307be026$var$onError","err","addEventListener","e","preventDefault","value","currentTarget","elements","news","trim","query","fetch","then","response","json","results","length","Error","markup","article","catch","finally","contentEls","querySelectorAll","parseInt","window","getComputedStyle","lineHeight","forEach","contentEl","contentText","innerText","classList","add","Math","ceil","clientHeight","maxLength","ellipsis","truncatedText","substring","replace","reset"],"version":3,"file":"index.b8085ae9.js.map"}